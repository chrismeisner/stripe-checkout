<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chris Meisner - Design Partner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Include Stripe.js -->
  <script src="https://js.stripe.com/v3/"></script>
  
<!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ETEC4ZKJ3M"></script>
  <script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
  
	gtag('config', 'G-ETEC4ZKJ3M');
  </script>
  
</head>
<body class="bg-gray-100 font-sans">

  <div class="max-w-md mx-auto p-4 bg-white shadow-lg mt-8 rounded-lg">
	<div class="mb-6">
	  <h1 class="text-2xl font-bold text-left">Chris Meisner</h1>
	  <p class="text-gray-700 mt-2 text-left">Intro paragraph, design partner to founders, help founders and startups bring their ideas to life.</p>
	  <a href="https://calendly.com/chrismeisner/intro" target="_blank" class="text-blue-600 mt-4 inline-block underline">Book a discovery call</a>
	</div>

	<div>
	  <h2 class="font-semibold text-lg mb-2">Available Services:</h2>
	  <div id="serviceSelection" class="grid grid-cols-2 gap-4"> <!-- Always 2 columns, even on mobile -->
		<div>
		  <div data-service="Design" data-rate="1000" class="service-option block bg-gray-200 p-4 rounded-md text-center cursor-pointer border border-gray-200 hover:border-blue-500 transition-colors">
			<p class="font-medium">Design</p>
			<p class="text-sm mt-1">$1,000 day rate</p>
		  </div>
		  <a href="#" class="text-blue-600 mt-2 inline-block underline" id="learnMoreDesign">Learn more</a> <!-- Trigger for the modal -->
		</div>
		<div>
		  <div data-service="Design+Code" data-rate="1200" class="service-option block bg-gray-200 p-4 rounded-md text-center cursor-pointer border border-gray-200 hover:border-blue-500 transition-colors">
			<p class="font-medium">Design + Code</p>
			<p class="text-sm mt-1">$1,200 day rate</p>
		  </div>
		  <a href="#" class="text-blue-600 mt-2 inline-block underline" id="learnMoreDesignCode">Learn more</a> <!-- Trigger for the modal -->
		</div>
	  </div>

	  <div class="mt-6 hidden" id="daysSection">
		<h2 class="font-semibold text-lg mb-2">How many days a week do you need me?</h2>
		<div class="flex justify-start items-center space-x-4">
		  <button type="button" id="decrease" class="w-10 h-10 sm:w-12 sm:h-12 bg-gray-300 hover:bg-gray-400 rounded-full text-xl flex justify-center items-center">-</button>
		  <span id="days" class="text-xl font-semibold">1.0</span>
		  <button type="button" id="increase" class="w-10 h-10 sm:w-12 sm:h-12 bg-gray-300 hover:bg-gray-400 rounded-full text-xl flex justify-center items-center">+</button>
		</div>
	  </div>

	  <div class="mt-6 hidden" id="startDateSection">
		<h2 class="font-semibold text-lg mb-2">When do you want to get started?</h2>
		<div>
		  <select id="startDate" class="bg-gray-100 p-2 rounded w-full">
			<option value="2024-09-16">Week of Sept 16</option>
			<option value="2024-09-23">Week of Sept 23</option>
			<option value="2024-09-30">Week of Sept 30</option>
		  </select>
		</div>
	  </div>

	  <div class="mt-6">
		<p class="text-3xl font-bold" id="totalPrice">$0</p>
		<p class="text-lg">Per Week</p>

		<div class="mt-4">
		  <label class="inline-flex items-center">
			<input type="checkbox" id="recurring" class="form-checkbox h-5 w-5 text-blue-600">
			<span class="ml-2 text-gray-700">Recurring Weekly</span>
		  </label>
		</div>

		<div class="mt-6">
		  <button type="button" id="proceedToPayment" class="w-full bg-blue-600 text-white p-3 rounded-md font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>Proceed to Payment</button>
		</div>
	  </div>
	</div>
  </div>

  <!-- Modal for Design Service -->
  <div id="modalDesign" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center hidden">
	<div class="bg-white p-6 rounded-md w-11/12 max-w-md relative">
	  <h3 class="text-lg font-semibold">Design Service Details</h3>
	  <p class="mt-4">The Design service includes expert UI/UX design tailored to your needs. With this service, you'll get high-quality visual design that aligns with your product goals.</p>
	  <button class="absolute top-2 right-2 text-gray-500 hover:text-gray-700" id="closeModalDesign">✕</button>
	</div>
  </div>

  <!-- Modal for Design + Code Service -->
  <div id="modalDesignCode" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center hidden">
	<div class="bg-white p-6 rounded-md w-11/12 max-w-md relative">
	  <h3 class="text-lg font-semibold">Design + Code Service Details</h3>
	  <p class="mt-4">The Design + Code service provides both design and development expertise. You'll receive fully functional front-end code along with tailored UI/UX designs, ideal for startups needing rapid prototyping and implementation.</p>
	  <button class="absolute top-2 right-2 text-gray-500 hover:text-gray-700" id="closeModalDesignCode">✕</button>
	</div>
  </div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
	const serviceOptions = document.querySelectorAll('.service-option');
	let selectedServiceRate = 0;
	let days = 1.0;
	let activeService = null;
	let recurring = false;

	const daysElement = document.getElementById('days');
	const totalPriceElement = document.getElementById('totalPrice');
	const startDateSection = document.getElementById('startDateSection');
	const proceedButton = document.getElementById('proceedToPayment');
	const startDateElement = document.getElementById('startDate');

	proceedButton.disabled = true;

	// Modal elements
	const modalDesign = document.getElementById('modalDesign');
	const modalDesignCode = document.getElementById('modalDesignCode');
	const learnMoreDesign = document.getElementById('learnMoreDesign');
	const learnMoreDesignCode = document.getElementById('learnMoreDesignCode');
	const closeModalDesign = document.getElementById('closeModalDesign');
	const closeModalDesignCode = document.getElementById('closeModalDesignCode');

	// Open modals
	learnMoreDesign.addEventListener('click', function(e) {
	  e.preventDefault();
	  modalDesign.classList.remove('hidden');
	});

	learnMoreDesignCode.addEventListener('click', function(e) {
	  e.preventDefault();
	  modalDesignCode.classList.remove('hidden');
	});

	// Close modals when clicking on close button
	closeModalDesign.addEventListener('click', function() {
	  modalDesign.classList.add('hidden');
	});

	closeModalDesignCode.addEventListener('click', function() {
	  modalDesignCode.classList.add('hidden');
	});

	// Close modal when clicking outside
	window.addEventListener('click', function(e) {
	  if (e.target === modalDesign) {
		modalDesign.classList.add('hidden');
	  }
	  if (e.target === modalDesignCode) {
		modalDesignCode.classList.add('hidden');
	  }
	});

	document.getElementById('increase').addEventListener('click', () => {
	  if (days < 5) {
		days += 0.5;
		daysElement.textContent = days.toFixed(1);
		updateTotalPrice();
		printSummary();
	  }
	});

	document.getElementById('decrease').addEventListener('click', () => {
	  if (days > 0.5) {
		days -= 0.5;
		daysElement.textContent = days.toFixed(1);
		updateTotalPrice();
		printSummary();
	  }
	});

	serviceOptions.forEach(option => {
	  option.addEventListener('click', () => {
		const isActive = option === activeService;

		if (isActive) {
		  option.classList.remove('selected', 'bg-blue-100', 'border-blue-500');
		  document.getElementById('daysSection').classList.add('hidden');
		  startDateSection.classList.add('hidden');
		  activeService = null;
		  resetServiceSelection();
		} else {
		  serviceOptions.forEach(opt => opt.classList.remove('selected', 'bg-blue-100', 'border-blue-500'));
		  option.classList.add('selected', 'bg-blue-100', 'border-blue-500');

		  selectedServiceRate = parseFloat(option.getAttribute('data-rate'));
		  daysElement.textContent = days.toFixed(1);
		  document.getElementById('daysSection').classList.remove('hidden');
		  startDateSection.classList.remove('hidden');
		  activeService = option;
		}
		toggleProceedButton();
		updateTotalPrice();
		printSummary();
	  });
	});

	document.getElementById('recurring').addEventListener('change', (e) => {
	  recurring = e.target.checked;
	  printSummary();
	});

	startDateElement.addEventListener('change', (e) => {
	  printSummary();
	});

	function resetServiceSelection() {
	  selectedServiceRate = 0;
	  daysElement.textContent = days.toFixed(1);
	  updateTotalPrice();
	  toggleProceedButton();
	}

	function updateTotalPrice() {
	  const total = selectedServiceRate * days;
	  totalPriceElement.textContent = '$' + total.toLocaleString();
	}

	function toggleProceedButton() {
	  if (activeService) {
		proceedButton.disabled = false;
	  } else {
		proceedButton.disabled = true;
	  }
	}

	function printSummary() {
	  let serviceName = activeService ? activeService.getAttribute('data-service') : 'None';
	  let startDate = document.getElementById('startDate').value;

	  let trialPeriodDays = 0;
	  if (recurring) {
		const today = new Date();
		const selectedDate = new Date(startDate);
		trialPeriodDays = Math.round((selectedDate - today) / (1000 * 60 * 60 * 24));
		
		if (trialPeriodDays < 0) {
		  trialPeriodDays = 0;
		}
		
		console.log(`Trial Period: ${trialPeriodDays} day(s)`);
	  }

	  let summary = `Selected Service: ${serviceName}\nDays per Week: ${days.toFixed(1)}\nRecurring: ${recurring ? 'Yes' : 'No'}\nStart Date: ${startDate}\nTotal Price: $${(selectedServiceRate * days).toLocaleString()}`;
	  console.log(summary);
	}

	var stripe = Stripe('pk_live_51PCj8lIHCU1xjU1mJ4ao2rwBnuPauB5BdaAwqGV6v0zOpVy3ZYIkfRyoFurGIHrtSVkfN3mtAjokbIOqt9iVXn9X00awUln3ba');

	proceedButton.addEventListener('click', () => {
	  const recurring = document.getElementById('recurring').checked;
	  let serviceName = activeService ? activeService.getAttribute('data-service') : 'None';
	  let startDate = document.getElementById('startDate').value;
	  let summary = `Selected Service: ${serviceName}, Days per Week: ${days.toFixed(1)}, Recurring: ${recurring ? 'Yes' : 'No'}, Start Date: ${startDate}, Total Price: $${(selectedServiceRate * days).toLocaleString()}`;

	  fetch('/create-checkout-session', {
		method: 'POST',
		headers: {
		  'Content-Type': 'application/json',
		},
		body: JSON.stringify({
		  amount: selectedServiceRate * days,
		  recurring: recurring,
		  serviceName: serviceName,
		  summary: summary,
		  startDate: startDate
		}),
	  })
	  .then((response) => response.json())
	  .then((session) => {
		return stripe.redirectToCheckout({ sessionId: session.id });
	  })
	  .then((result) => {
		if (result.error) {
		  alert(result.error.message);
		}
	  })
	  .catch((error) => {
		console.error('Error:', error);
	  });
	});
  });
</script>

</body>
</html>
